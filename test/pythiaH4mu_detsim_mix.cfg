process PROD = {

   # MessageLogger control
   #
   service = MessageLogger
   {
      untracked vstring destinations = {"cout"}
       
      untracked vstring categories = { "FwkJob", "SimG4CoreApplication" }
 
      untracked PSet cout = 
      { 
         untracked PSet default = { untracked int32 limit = 0 }    # kill all messages in the log
	 untracked PSet SimG4CoreApplication = { untracked int32 limit = -1 }
         untracked PSet FwkJob  = { untracked int32 limit = -1 }  # except *all* of FwkJob's
      }
       
      #untracked vstring fwkJobReports = {"FrameworkJobReport.xml"}
   }
   
   service = Timing {}
    
   # control point for all seeds
   #
   service = RandomNumberGeneratorService
   {
      untracked uint32 sourceSeed = 98765
      PSet moduleSeeds =
      {
         untracked uint32 VtxSmeared = 987654321
      }
   }

   # physics event generation
   #
   include "IOMC/GeneratorInterface/data/PythiaHZZ4mu.cfi"
   replace PythiaSource.maxEvents = 100
   replace PythiaSource.pythiaHepMCVerbosity = true
   replace PythiaSource.pythiaPylistVerbosity = 1
   replace PythiaSource.maxEventsToPrint = 1

   # event vertex smearing - applies only once (internal check)
   # Note : all internal generators will always do (0,0,0) vertex
   #
   include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"
   
   #Geometry
   #
   include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
   es_module = TrackerGeometricDetESModule {}
   
   # Magnetic Field
   #
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

   # Geant4-based CMS Detector simulation
   #
   include "SimG4Core/Application/data/g4SimHits.cfi"

   module mix = MixingModule 
   {
      secsource input = PoolRASource 
      {
         untracked vstring fileNames = 
	 {
	 '/store/MC/2006/10/23/MC-110-os-minbias/B4A8EFD3-A962-DB11-A851-00304875AACB.root',
	 '/store/unmerged/PreProd/2006/10/20/Minbias-for-Pileup-CMSSW110/GEN-SIM/0000/081176BD-A260-DB11-A5BF-003048767D6F.root',
	 '/store/unmerged/PreProd/2006/10/20/Minbias-for-Pileup-CMSSW110/GEN-SIM/0000/0A902C20-9F60-DB11-A0FB-00304875A7B5.root',
	 '/store/unmerged/PreProd/2006/10/20/Minbias-for-Pileup-CMSSW110/GEN-SIM/0000/123EBEC5-A260-DB11-922E-001731A28A31.root',
	 '/store/unmerged/PreProd/2006/10/20/Minbias-for-Pileup-CMSSW110/GEN-SIM/0000/4E8C6207-A160-DB11-AA0A-001731AF68B9.root',
	 '/store/unmerged/PreProd/2006/10/20/Minbias-for-Pileup-CMSSW110/GEN-SIM/0000/76028EC0-9B60-DB11-96D3-00304875A7B5.root',
	 '/store/unmerged/PreProd/2006/10/20/Minbias-for-Pileup-CMSSW110/GEN-SIM/0000/7A0516AC-A360-DB11-B9E4-001731AF684D.root',
	 '/store/unmerged/PreProd/2006/10/20/Minbias-for-Pileup-CMSSW110/GEN-SIM/0000/B23F1F6D-9460-DB11-9E5D-001731A283E1.root',
	 '/store/unmerged/PreProd/2006/10/20/Minbias-for-Pileup-CMSSW110/GEN-SIM/0000/D2C715C5-A260-DB11-9B2C-00304876A0EB.root',
	 '/store/unmerged/PreProd/2006/10/20/Minbias-for-Pileup-CMSSW110/GEN-SIM/0000/D6F09AC8-A160-DB11-974F-00304876A0EB.root',
	 '/store/unmerged/PreProd/2006/10/20/Minbias-for-Pileup-CMSSW110/GEN-SIM/0000/D6F5E982-A260-DB11-97F0-001731A283E1.root' 
	 }  
         string type = "poisson"
         double averageNumber = 3
         int32 minBunch = -1
         int32 maxBunch = 2
         int32 seed = 1234567
      }
      int32 bunchspace = 25
      untracked bool checktof =false
   }

   
   module GEN-SIM-MIX = PoolOutputModule
   {
      untracked string fileName = "pythiaHZZ4mu_detsim_mix.root"
   }

   # now the order of execution
   #   
   path p1 = { VtxSmeared, g4SimHits, mix }
   endpath e = { GEN-SIM-MIX }

}
